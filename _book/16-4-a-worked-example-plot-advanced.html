<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta property="og:title" content="YaRrr! The Pirate’s Guide to R" />
<meta property="og:type" content="book" />
<meta property="og:url" content="https://bookdown.org/ndphillips/YaRrr/" />
<meta property="og:image" content="https://bookdown.org/ndphillips/YaRrr/images/YaRrr_Cover.jpg" />
<meta property="og:description" content="An introductory book to R written by, and for, R pirates" />
<meta name="github-repo" content="ndphillips/ThePiratesGuideToR" />

<meta name="author" content="Nathaniel D. Phillips" />

<meta name="date" content="2017-10-29" />

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: { equationNumbers: { autoNumber: "AMS" } }
});
</script>
  <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_CHTML-full" type="text/javascript"></script>

<meta name="description" content="An introductory book to R written by, and for, R pirates">

<title>YaRrr! The Pirate’s Guide to R</title>

<script src="libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="libs/navigation-1.1/tabsets.js"></script>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
</style>
</head>

<body>

<div class="container-fluid main-container">


<div class="row">
<div class="col-sm-12">
<div id="TOC">
<ul>
<li class="has-sub"><a href="index.html#intro"><span class="toc-section-number">1</span> Preface</a><ul>
<li><a href="1-1-where-did-this-book-come-from.html#where-did-this-book-come-from"><span class="toc-section-number">1.1</span> Where did this book come from?</a></li>
<li><a href="1-2-who-is-this-book-for.html#who-is-this-book-for"><span class="toc-section-number">1.2</span> Who is this book for?</a></li>
<li><a href="1-3-why-is-r-so-great.html#why-is-r-so-great"><span class="toc-section-number">1.3</span> Why is R so great?</a></li>
<li><a href="1-4-rrelationship.html#rrelationship"><span class="toc-section-number">1.4</span> Why R is like a relationship…</a></li>
<li class="has-sub"><a href="1-5-r-resources.html#r-resources"><span class="toc-section-number">1.5</span> R resources</a><ul>
<li><a href="1-5-r-resources.html#r-cheatsheets"><span class="toc-section-number">1.5.1</span> R Cheatsheets</a></li>
<li><a href="1-5-r-resources.html#getting-r-help-and-inspiration-online"><span class="toc-section-number">1.5.2</span> Getting R help and inspiration online</a></li>
<li><a href="1-5-r-resources.html#other-r-books"><span class="toc-section-number">1.5.3</span> Other R books</a></li>
</ul></li>
<li class="has-sub"><a href="1-6-who-am-i.html#who-am-i"><span class="toc-section-number">1.6</span> Who am I?</a><ul>
<li><a href="1-6-who-am-i.html#acknowledgements"><span class="toc-section-number">1.6.1</span> Acknowledgements</a></li>
</ul></li>
<li><a href="1-7-please-contribute.html#please-contribute"><span class="toc-section-number">1.7</span> Please Contribute!</a></li>
</ul></li>
<li class="has-sub"><a href="2-started.html#started"><span class="toc-section-number">2</span> Getting Started</a><ul>
<li class="has-sub"><a href="2-1-installing-base-r-and-rstudio.html#installing-base-r-and-rstudio"><span class="toc-section-number">2.1</span> Installing Base-R and RStudio</a><ul>
<li><a href="2-1-installing-base-r-and-rstudio.html#check-for-version-updates"><span class="toc-section-number">2.1.1</span> Check for version updates</a></li>
</ul></li>
<li class="has-sub"><a href="2-2-the-four-rstudio-windows.html#the-four-rstudio-windows"><span class="toc-section-number">2.2</span> The four RStudio Windows</a><ul>
<li><a href="2-2-the-four-rstudio-windows.html#source---your-notepad-for-code"><span class="toc-section-number">2.2.1</span> Source - Your notepad for code</a></li>
<li><a href="2-2-the-four-rstudio-windows.html#console-rs-heart"><span class="toc-section-number">2.2.2</span> Console: R’s Heart</a></li>
<li><a href="2-2-the-four-rstudio-windows.html#environment-history"><span class="toc-section-number">2.2.3</span> Environment / History</a></li>
<li><a href="2-2-the-four-rstudio-windows.html#files-plots-packages-help"><span class="toc-section-number">2.2.4</span> Files / Plots / Packages / Help</a></li>
</ul></li>
<li class="has-sub"><a href="2-3-packages.html#packages"><span class="toc-section-number">2.3</span> Packages</a><ul>
<li><a href="2-3-packages.html#installing-a-new-package"><span class="toc-section-number">2.3.1</span> Installing a new package</a></li>
<li><a href="2-3-packages.html#loading-a-package"><span class="toc-section-number">2.3.2</span> Loading a package</a></li>
</ul></li>
<li class="has-sub"><a href="2-4-reading-and-writing-code.html#reading-and-writing-code"><span class="toc-section-number">2.4</span> Reading and writing Code</a><ul>
<li><a href="2-4-reading-and-writing-code.html#code-chunks"><span class="toc-section-number">2.4.1</span> Code Chunks</a></li>
<li><a href="2-4-reading-and-writing-code.html#comments-with"><span class="toc-section-number">2.4.2</span> Comments with #</a></li>
<li><a href="2-4-reading-and-writing-code.html#element-numbers-in-output-1"><span class="toc-section-number">2.4.3</span> Element numbers in output [1]</a></li>
</ul></li>
<li class="has-sub"><a href="2-5-debugging.html#debugging"><span class="toc-section-number">2.5</span> Debugging</a><ul>
<li><a href="2-5-debugging.html#r-is-not-ready"><span class="toc-section-number">2.5.1</span> R is not ready (&gt;)</a></li>
<li><a href="2-5-debugging.html#misspelled-object-or-function"><span class="toc-section-number">2.5.2</span> Misspelled object or function</a></li>
<li><a href="2-5-debugging.html#punctuation-problems"><span class="toc-section-number">2.5.3</span> Punctuation problems</a></li>
</ul></li>
</ul></li>
<li class="has-sub"><a href="3-jumpin.html#jumpin"><span class="toc-section-number">3</span> Jump In!</a><ul>
<li><a href="3-1-exploring-data.html#exploring-data"><span class="toc-section-number">3.1</span> Exploring data</a></li>
<li><a href="3-2-descriptive-statistics.html#descriptive-statistics"><span class="toc-section-number">3.2</span> Descriptive statistics</a></li>
<li><a href="3-3-plotting.html#plotting"><span class="toc-section-number">3.3</span> Plotting</a></li>
<li><a href="3-4-hypothesis-tests.html#hypothesis-tests"><span class="toc-section-number">3.4</span> Hypothesis tests</a></li>
<li><a href="3-5-regression-analysis.html#regression-analysis"><span class="toc-section-number">3.5</span> Regression analysis</a></li>
<li><a href="3-6-bayesian-statistics.html#bayesian-statistics"><span class="toc-section-number">3.6</span> Bayesian Statistics</a></li>
<li><a href="3-7-wasnt-that-easy.html#wasnt-that-easy"><span class="toc-section-number">3.7</span> Wasn’t that easy?!</a></li>
</ul></li>
<li class="has-sub"><a href="4-basics.html#basics"><span class="toc-section-number">4</span> The Basics</a><ul>
<li><a href="4-1-the-command-line-console.html#the-command-line-console"><span class="toc-section-number">4.1</span> The command-line (Console)</a></li>
<li class="has-sub"><a href="4-2-writing-r-scripts-in-an-editor.html#writing-r-scripts-in-an-editor"><span class="toc-section-number">4.2</span> Writing R scripts in an editor</a><ul>
<li><a href="4-2-writing-r-scripts-in-an-editor.html#send-code-from-an-source-to-the-console"><span class="toc-section-number">4.2.1</span> Send code from an source to the console</a></li>
</ul></li>
<li class="has-sub"><a href="4-3-a-brief-style-guide-commenting-and-spacing.html#a-brief-style-guide-commenting-and-spacing"><span class="toc-section-number">4.3</span> A brief style guide: Commenting and spacing</a><ul>
<li><a href="4-3-a-brief-style-guide-commenting-and-spacing.html#commenting-code-with-the-pound-sign"><span class="toc-section-number">4.3.1</span> Commenting code with the # (pound) sign</a></li>
<li><a href="4-3-a-brief-style-guide-commenting-and-spacing.html#spacing"><span class="toc-section-number">4.3.2</span> Spacing</a></li>
</ul></li>
<li class="has-sub"><a href="4-4-objects-and-functions.html#objects-and-functions"><span class="toc-section-number">4.4</span> Objects and functions</a><ul>
<li><a href="4-4-objects-and-functions.html#numbers-versus-characters"><span class="toc-section-number">4.4.1</span> Numbers versus characters</a></li>
<li><a href="4-4-objects-and-functions.html#creating-new-objects-with--"><span class="toc-section-number">4.4.2</span> Creating new objects with &lt;-</a></li>
<li><a href="4-4-objects-and-functions.html#how-to-name-objects"><span class="toc-section-number">4.4.3</span> How to name objects</a></li>
<li><a href="4-4-objects-and-functions.html#example-pirates-of-the-caribbean"><span class="toc-section-number">4.4.4</span> Example: Pirates of The Caribbean</a></li>
</ul></li>
<li><a href="4-5-test-your-r-might.html#test-your-r-might"><span class="toc-section-number">4.5</span> Test your R might!</a></li>
</ul></li>
<li class="has-sub"><a href="5-scalersvectors.html#scalersvectors"><span class="toc-section-number">5</span> Scalars and vectors</a><ul>
<li><a href="5-1-scalars.html#scalars"><span class="toc-section-number">5.1</span> Scalars</a></li>
<li class="has-sub"><a href="5-2-vectors.html#vectors"><span class="toc-section-number">5.2</span> Vectors</a><ul>
<li><a href="5-2-vectors.html#ab"><span class="toc-section-number">5.2.1</span> a:b</a></li>
<li><a href="5-2-vectors.html#seq"><span class="toc-section-number">5.2.2</span> seq()</a></li>
<li><a href="5-2-vectors.html#rep"><span class="toc-section-number">5.2.3</span> rep()</a></li>
</ul></li>
<li class="has-sub"><a href="5-3-generating-random-data.html#generating-random-data"><span class="toc-section-number">5.3</span> Generating random data</a><ul>
<li><a href="5-3-generating-random-data.html#sample"><span class="toc-section-number">5.3.1</span> sample()</a></li>
<li><a href="5-3-generating-random-data.html#normal-gaussian"><span class="toc-section-number">5.3.2</span> Normal (Gaussian)</a></li>
<li><a href="5-3-generating-random-data.html#uniform"><span class="toc-section-number">5.3.3</span> Uniform</a></li>
<li><a href="5-3-generating-random-data.html#notes-on-random-samples"><span class="toc-section-number">5.3.4</span> Notes on random samples</a></li>
</ul></li>
<li><a href="5-4-test-your-r-might-1.html#test-your-r-might-1"><span class="toc-section-number">5.4</span> Test your R might!</a></li>
</ul></li>
<li class="has-sub"><a href="6-vectorfunctions.html#vectorfunctions"><span class="toc-section-number">6</span> Vector functions</a><ul>
<li class="has-sub"><a href="6-1-arithmetic-operations-on-vectors.html#arithmetic-operations-on-vectors"><span class="toc-section-number">6.1</span> Arithmetic operations on vectors</a><ul>
<li><a href="6-1-arithmetic-operations-on-vectors.html#basic-math-with-multiple-vectors"><span class="toc-section-number">6.1.1</span> Basic math with multiple vectors</a></li>
<li><a href="6-1-arithmetic-operations-on-vectors.html#ex-pirate-bake-sale"><span class="toc-section-number">6.1.2</span> Ex: Pirate Bake Sale</a></li>
</ul></li>
<li class="has-sub"><a href="6-2-summary-statistics.html#summary-statistics"><span class="toc-section-number">6.2</span> Summary statistics</a><ul>
<li><a href="6-2-summary-statistics.html#length"><span class="toc-section-number">6.2.1</span> length()</a></li>
<li><a href="6-2-summary-statistics.html#additional-numeric-vector-functions"><span class="toc-section-number">6.2.2</span> Additional numeric vector functions</a></li>
<li><a href="6-2-summary-statistics.html#sample-statistics-from-random-samples"><span class="toc-section-number">6.2.3</span> Sample statistics from random samples</a></li>
</ul></li>
<li><a href="6-3-counting-statistics.html#counting-statistics"><span class="toc-section-number">6.3</span> Counting statistics</a></li>
<li><a href="6-4-missing-na-values.html#missing-na-values"><span class="toc-section-number">6.4</span> Missing (NA) values</a></li>
<li class="has-sub"><a href="6-5-standardization-z-score.html#standardization-z-score"><span class="toc-section-number">6.5</span> Standardization (z-score)</a><ul>
<li><a href="6-5-standardization-z-score.html#ex-evaluating-a-competition"><span class="toc-section-number">6.5.1</span> Ex: Evaluating a competition</a></li>
</ul></li>
<li><a href="6-6-test-your-r-might-2.html#test-your-r-might-2"><span class="toc-section-number">6.6</span> Test your R Might!</a></li>
</ul></li>
<li class="has-sub"><a href="7-vectorindexing.html#vectorindexing"><span class="toc-section-number">7</span> Indexing Vectors with [ ]</a><ul>
<li><a href="7-1-numerical-indexing.html#numerical-indexing"><span class="toc-section-number">7.1</span> Numerical Indexing</a></li>
<li class="has-sub"><a href="7-2-logical-indexing.html#logical-indexing"><span class="toc-section-number">7.2</span> Logical Indexing</a><ul>
<li><a href="7-2-logical-indexing.html#and-or-in"><span class="toc-section-number">7.2.1</span> <code>&amp;</code> (and), <code>|</code> (or), <code>%in%</code></a></li>
<li><a href="7-2-logical-indexing.html#counts-and-percentages-from-logical-vectors"><span class="toc-section-number">7.2.2</span> Counts and percentages from logical vectors</a></li>
<li><a href="7-2-logical-indexing.html#additional-logical-functions"><span class="toc-section-number">7.2.3</span> Additional Logical functions</a></li>
</ul></li>
<li class="has-sub"><a href="7-3-changing-values-of-a-vector.html#changing-values-of-a-vector"><span class="toc-section-number">7.3</span> Changing values of a vector</a><ul>
<li><a href="7-3-changing-values-of-a-vector.html#ex-fixing-invalid-responses-to-a-happiness-survey"><span class="toc-section-number">7.3.1</span> Ex: Fixing invalid responses to a Happiness survey</a></li>
</ul></li>
<li><a href="7-4-test-your-r-might-movie-data.html#test-your-r-might-movie-data"><span class="toc-section-number">7.4</span> Test your R Might!: Movie data</a></li>
</ul></li>
<li class="has-sub"><a href="8-matricesdataframes.html#matricesdataframes"><span class="toc-section-number">8</span> Matrices and Dataframes</a><ul>
<li><a href="8-1-what-are-matrices-and-dataframes.html#what-are-matrices-and-dataframes"><span class="toc-section-number">8.1</span> What are matrices and dataframes?</a></li>
<li class="has-sub"><a href="8-2-creating-matrices-and-dataframes.html#creating-matrices-and-dataframes"><span class="toc-section-number">8.2</span> Creating matrices and dataframes</a><ul>
<li><a href="8-2-creating-matrices-and-dataframes.html#cbind-rbind"><span class="toc-section-number">8.2.1</span> <code>cbind()</code>, <code>rbind()</code></a></li>
<li><a href="8-2-creating-matrices-and-dataframes.html#matrix"><span class="toc-section-number">8.2.2</span> <code>matrix()</code></a></li>
<li><a href="8-2-creating-matrices-and-dataframes.html#data.frame"><span class="toc-section-number">8.2.3</span> <code>data.frame()</code></a></li>
<li><a href="8-2-creating-matrices-and-dataframes.html#dataframes-pre-loaded-in-r"><span class="toc-section-number">8.2.4</span> Dataframes pre-loaded in R</a></li>
</ul></li>
<li class="has-sub"><a href="8-3-matrix-and-dataframe-functions.html#matrix-and-dataframe-functions"><span class="toc-section-number">8.3</span> Matrix and dataframe functions</a><ul>
<li><a href="8-3-matrix-and-dataframe-functions.html#head-tail-view"><span class="toc-section-number">8.3.1</span> <code>head(), tail(), View()</code></a></li>
<li><a href="8-3-matrix-and-dataframe-functions.html#summary-str"><span class="toc-section-number">8.3.2</span> <code>summary()</code>, <code>str()</code></a></li>
</ul></li>
<li class="has-sub"><a href="8-4-dataframe-column-names.html#dataframe-column-names"><span class="toc-section-number">8.4</span> Dataframe column names</a><ul>
<li><a href="8-4-dataframe-column-names.html#adding-new-columns"><span class="toc-section-number">8.4.1</span> Adding new columns</a></li>
<li><a href="8-4-dataframe-column-names.html#changing-column-names"><span class="toc-section-number">8.4.2</span> Changing column names</a></li>
</ul></li>
<li class="has-sub"><a href="8-5-slicing-dataframes.html#slicing-dataframes"><span class="toc-section-number">8.5</span> Slicing dataframes</a><ul>
<li><a href="8-5-slicing-dataframes.html#slicing-with"><span class="toc-section-number">8.5.1</span> Slicing with <code>[, ]</code></a></li>
<li><a href="8-5-slicing-dataframes.html#slicing-with-logical-vectors"><span class="toc-section-number">8.5.2</span> Slicing with logical vectors</a></li>
<li><a href="8-5-slicing-dataframes.html#slicing-with-subset"><span class="toc-section-number">8.5.3</span> Slicing with <code>subset()</code></a></li>
</ul></li>
<li class="has-sub"><a href="8-6-combining-slicing-with-functions.html#combining-slicing-with-functions"><span class="toc-section-number">8.6</span> Combining slicing with functions</a><ul>
<li><a href="8-6-combining-slicing-with-functions.html#with"><span class="toc-section-number">8.6.1</span> <code>with()</code></a></li>
</ul></li>
<li><a href="8-7-test-your-r-might-pirates-and-superheroes.html#test-your-r-might-pirates-and-superheroes"><span class="toc-section-number">8.7</span> Test your R might! Pirates and superheroes</a></li>
</ul></li>
<li class="has-sub"><a href="9-importingdata.html#importingdata"><span class="toc-section-number">9</span> Importing, saving and managing data</a><ul>
<li class="has-sub"><a href="9-1-workspace-management-functions.html#workspace-management-functions"><span class="toc-section-number">9.1</span> Workspace management functions</a><ul>
<li><a href="9-1-workspace-management-functions.html#why-object-and-file-management-is-so-important"><span class="toc-section-number">9.1.1</span> Why object and file management is so important</a></li>
</ul></li>
<li><a href="9-2-the-working-directory.html#the-working-directory"><span class="toc-section-number">9.2</span> The working directory</a></li>
<li><a href="9-3-projects-in-rstudio.html#projects-in-rstudio"><span class="toc-section-number">9.3</span> Projects in RStudio</a></li>
<li class="has-sub"><a href="9-4-the-workspace.html#the-workspace"><span class="toc-section-number">9.4</span> The workspace</a><ul>
<li><a href="9-4-the-workspace.html#ls"><span class="toc-section-number">9.4.1</span> ls()</a></li>
</ul></li>
<li class="has-sub"><a href="9-5-rdata-files.html#rdata-files"><span class="toc-section-number">9.5</span> .RData files</a><ul>
<li><a href="9-5-rdata-files.html#save"><span class="toc-section-number">9.5.1</span> save()</a></li>
<li><a href="9-5-rdata-files.html#save.image"><span class="toc-section-number">9.5.2</span> save.image()</a></li>
<li><a href="9-5-rdata-files.html#load"><span class="toc-section-number">9.5.3</span> load()</a></li>
<li><a href="9-5-rdata-files.html#rm"><span class="toc-section-number">9.5.4</span> rm()</a></li>
</ul></li>
<li class="has-sub"><a href="9-6-txt-files.html#txt-files"><span class="toc-section-number">9.6</span> .txt files</a><ul>
<li><a href="9-6-txt-files.html#write.table"><span class="toc-section-number">9.6.1</span> write.table()</a></li>
<li><a href="9-6-txt-files.html#read.table"><span class="toc-section-number">9.6.2</span> read.table()</a></li>
<li><a href="9-6-txt-files.html#reading-files-directly-from-a-web-url"><span class="toc-section-number">9.6.3</span> Reading files directly from a web URL</a></li>
</ul></li>
<li><a href="9-7-excel-spss-and-other-data-files.html#excel-spss-and-other-data-files"><span class="toc-section-number">9.7</span> Excel, SPSS, and other data files</a></li>
<li><a href="9-8-additional-tips.html#additional-tips"><span class="toc-section-number">9.8</span> Additional tips</a></li>
<li><a href="9-9-test-your-r-might-3.html#test-your-r-might-3"><span class="toc-section-number">9.9</span> Test your R Might!</a></li>
</ul></li>
<li class="has-sub"><a href="10-advanceddataframe.html#advanceddataframe"><span class="toc-section-number">10</span> Advanced dataframe manipulation</a><ul>
<li><a href="10-1-order-sorting-data.html#order-sorting-data"><span class="toc-section-number">10.1</span> <code>order()</code>: Sorting data</a></li>
<li><a href="10-2-merge-combining-data.html#merge-combining-data"><span class="toc-section-number">10.2</span> <code>merge()</code>: Combining data</a></li>
<li><a href="10-3-aggregate-grouped-aggregation.html#aggregate-grouped-aggregation"><span class="toc-section-number">10.3</span> <code>aggregate()</code>: Grouped aggregation</a></li>
<li class="has-sub"><a href="10-4-dplyr.html#dplyr"><span class="toc-section-number">10.4</span> <code>dplyr</code></a><ul>
<li><a href="10-4-dplyr.html#additional-dplyr-help"><span class="toc-section-number">10.4.1</span> Additional dplyr help</a></li>
</ul></li>
<li class="has-sub"><a href="10-5-additional-aggregation-functions.html#additional-aggregation-functions"><span class="toc-section-number">10.5</span> Additional aggregation functions</a><ul>
<li><a href="10-5-additional-aggregation-functions.html#rowmeans-colmeans"><span class="toc-section-number">10.5.1</span> <code>rowMeans()</code>, <code>colMeans()</code></a></li>
<li><a href="10-5-additional-aggregation-functions.html#apply-family"><span class="toc-section-number">10.5.2</span> <code>apply</code> family</a></li>
</ul></li>
<li><a href="10-6-test-your-r-might-mmmmmcaffeine.html#test-your-r-might-mmmmmcaffeine"><span class="toc-section-number">10.6</span> Test your R might!: Mmmmm…caffeine</a></li>
</ul></li>
<li class="has-sub"><a href="11-plotting1.html#plotting1"><span class="toc-section-number">11</span> Plotting (I)</a><ul>
<li class="has-sub"><a href="11-1-colors.html#colors"><span class="toc-section-number">11.1</span> Colors</a><ul>
<li><a href="11-1-colors.html#colors-by-name"><span class="toc-section-number">11.1.1</span> Colors by name</a></li>
<li><a href="11-1-colors.html#gray"><span class="toc-section-number">11.1.2</span> gray()</a></li>
<li><a href="11-1-colors.html#yarrrtransparent"><span class="toc-section-number">11.1.3</span> <code>yarrr::transparent()</code></a></li>
</ul></li>
<li><a href="11-2-plotting-arguments.html#plotting-arguments"><span class="toc-section-number">11.2</span> Plotting arguments</a></li>
<li class="has-sub"><a href="11-3-scatterplot-plot.html#scatterplot-plot"><span class="toc-section-number">11.3</span> Scatterplot: <code>plot()</code></a><ul>
<li><a href="11-3-scatterplot-plot.html#symbol-types-pch"><span class="toc-section-number">11.3.1</span> Symbol types: <code>pch</code></a></li>
</ul></li>
<li><a href="11-4-histogram-hist.html#histogram-hist"><span class="toc-section-number">11.4</span> Histogram: <code>hist()</code></a></li>
<li class="has-sub"><a href="11-5-barplot-barplot.html#barplot-barplot"><span class="toc-section-number">11.5</span> Barplot: <code>barplot()</code></a><ul>
<li><a href="11-5-barplot-barplot.html#clustered-barplot"><span class="toc-section-number">11.5.1</span> Clustered barplot</a></li>
</ul></li>
<li class="has-sub"><a href="11-6-pirateplot.html#pirateplot"><span class="toc-section-number">11.6</span> <code>pirateplot()</code></a><ul>
<li><a href="11-6-pirateplot.html#pirateplot-themes"><span class="toc-section-number">11.6.1</span> Pirateplot themes</a></li>
<li><a href="11-6-pirateplot.html#customizing-pirateplots"><span class="toc-section-number">11.6.2</span> Customizing pirateplots</a></li>
<li><a href="11-6-pirateplot.html#saving-output"><span class="toc-section-number">11.6.3</span> Saving output</a></li>
</ul></li>
<li class="has-sub"><a href="11-7-low-level-plotting-functions.html#low-level-plotting-functions"><span class="toc-section-number">11.7</span> Low-level plotting functions</a><ul>
<li><a href="11-7-low-level-plotting-functions.html#starting-with-a-blank-plot"><span class="toc-section-number">11.7.1</span> Starting with a blank plot</a></li>
<li><a href="11-7-low-level-plotting-functions.html#points"><span class="toc-section-number">11.7.2</span> <code>points()</code></a></li>
<li><a href="11-7-low-level-plotting-functions.html#abline-segments-grid"><span class="toc-section-number">11.7.3</span> <code>abline()</code>, <code>segments()</code>, <code>grid()</code></a></li>
<li><a href="11-7-low-level-plotting-functions.html#text"><span class="toc-section-number">11.7.4</span> <code>text()</code></a></li>
<li><a href="11-7-low-level-plotting-functions.html#combining-text-and-numbers-with-paste"><span class="toc-section-number">11.7.5</span> Combining text and numbers with <code>paste()</code></a></li>
<li><a href="11-7-low-level-plotting-functions.html#curve"><span class="toc-section-number">11.7.6</span> <code>curve()</code></a></li>
<li><a href="11-7-low-level-plotting-functions.html#legend"><span class="toc-section-number">11.7.7</span> <code>legend()</code></a></li>
</ul></li>
<li><a href="11-8-saving-plots-to-a-file-with-pdf-jpeg-and-png.html#saving-plots-to-a-file-with-pdf-jpeg-and-png"><span class="toc-section-number">11.8</span> Saving plots to a file with <code>pdf()</code>, <code>jpeg()</code> and <code>png()</code></a></li>
<li><a href="11-9-examples.html#examples"><span class="toc-section-number">11.9</span> Examples</a></li>
<li><a href="11-10-test-your-r-might-purdy-pictures.html#test-your-r-might-purdy-pictures"><span class="toc-section-number">11.10</span> Test your R might! Purdy pictures</a></li>
</ul></li>
<li class="has-sub"><a href="12-plotting2.html#plotting2"><span class="toc-section-number">12</span> Plotting (II)</a><ul>
<li class="has-sub"><a href="12-1-more-colors.html#more-colors"><span class="toc-section-number">12.1</span> More colors</a><ul>
<li><a href="12-1-more-colors.html#piratepal"><span class="toc-section-number">12.1.1</span> <code>piratepal()</code></a></li>
<li><a href="12-1-more-colors.html#rcolorbrewer"><span class="toc-section-number">12.1.2</span> RColorBrewer</a></li>
<li><a href="12-1-more-colors.html#colorramp2"><span class="toc-section-number">12.1.3</span> colorRamp2</a></li>
<li><a href="12-1-more-colors.html#getting-colors-with-a-kuler"><span class="toc-section-number">12.1.4</span> Getting colors with a kuler</a></li>
</ul></li>
<li><a href="12-2-plot-margins.html#plot-margins"><span class="toc-section-number">12.2</span> Plot Margins</a></li>
<li class="has-sub"><a href="12-3-arranging-plots-with-parmfrow-and-layout.html#arranging-plots-with-parmfrow-and-layout"><span class="toc-section-number">12.3</span> Arranging plots with <code>par(mfrow)</code> and <code>layout()</code></a><ul>
<li><a href="12-3-arranging-plots-with-parmfrow-and-layout.html#complex-plot-layouts-with-layout"><span class="toc-section-number">12.3.1</span> Complex plot layouts with <code>layout()</code></a></li>
</ul></li>
<li><a href="12-4-additional-plotting-parameters.html#additional-plotting-parameters"><span class="toc-section-number">12.4</span> Additional plotting parameters</a></li>
</ul></li>
<li class="has-sub"><a href="13-htests.html#htests"><span class="toc-section-number">13</span> Hypothesis Tests</a><ul>
<li class="has-sub"><a href="13-1-a-short-introduction-to-hypothesis-tests.html#a-short-introduction-to-hypothesis-tests"><span class="toc-section-number">13.1</span> A short introduction to hypothesis tests</a><ul>
<li><a href="13-1-a-short-introduction-to-hypothesis-tests.html#null-v-alternative-hypothesis"><span class="toc-section-number">13.1.1</span> Null v Alternative Hypothesis</a></li>
<li><a href="13-1-a-short-introduction-to-hypothesis-tests.html#descriptive-statistics-1"><span class="toc-section-number">13.1.2</span> Descriptive statistics</a></li>
<li><a href="13-1-a-short-introduction-to-hypothesis-tests.html#test-statistics"><span class="toc-section-number">13.1.3</span> Test Statistics</a></li>
<li><a href="13-1-a-short-introduction-to-hypothesis-tests.html#p-value"><span class="toc-section-number">13.1.4</span> p-value</a></li>
</ul></li>
<li><a href="13-2-hypothesis-test-objects-htest.html#hypothesis-test-objects-htest"><span class="toc-section-number">13.2</span> Hypothesis test objects: <code>htest</code></a></li>
<li class="has-sub"><a href="13-3-t-test-t-test.html#t-test-t.test"><span class="toc-section-number">13.3</span> T-test: <code>t.test()</code></a><ul>
<li><a href="13-3-t-test-t-test.html#sample-t-test"><span class="toc-section-number">13.3.1</span> 1-sample t-test</a></li>
<li><a href="13-3-t-test-t-test.html#sample-t-test-1"><span class="toc-section-number">13.3.2</span> 2-sample t-test</a></li>
</ul></li>
<li><a href="13-4-correlation-cor-test.html#correlation-cor.test"><span class="toc-section-number">13.4</span> Correlation: <code>cor.test()</code></a></li>
<li class="has-sub"><a href="13-5-chi-square-chsq-test.html#chi-square-chsq.test"><span class="toc-section-number">13.5</span> Chi-square: <code>chsq.test()</code></a><ul>
<li><a href="13-5-chi-square-chsq-test.html#getting-apa-style-conclusions-with-the-apa-function"><span class="toc-section-number">13.5.1</span> Getting APA-style conclusions with the <code>apa</code> function</a></li>
</ul></li>
<li><a href="13-6-test-your-r-might-4.html#test-your-r-might-4"><span class="toc-section-number">13.6</span> Test your R might!</a></li>
</ul></li>
<li class="has-sub"><a href="14-anova.html#anova"><span class="toc-section-number">14</span> ANOVA</a><ul>
<li class="has-sub"><a href="14-1-full-factorial-between-subjects-anova.html#full-factorial-between-subjects-anova"><span class="toc-section-number">14.1</span> Full-factorial between-subjects ANOVA</a><ul>
<li><a href="14-1-full-factorial-between-subjects-anova.html#what-does-anova-stand-for"><span class="toc-section-number">14.1.1</span> What does ANOVA stand for?</a></li>
</ul></li>
<li><a href="14-2-steps-to-conduct-an-anova.html#steps-to-conduct-an-anova"><span class="toc-section-number">14.2</span> 4 Steps to conduct an ANOVA</a></li>
<li><a href="14-3-ex-one-way-anova.html#ex-one-way-anova"><span class="toc-section-number">14.3</span> Ex: One-way ANOVA</a></li>
<li class="has-sub"><a href="14-4-ex-two-way-anova.html#ex-two-way-anova"><span class="toc-section-number">14.4</span> Ex: Two-way ANOVA</a><ul>
<li><a href="14-4-ex-two-way-anova.html#anova-with-interactions"><span class="toc-section-number">14.4.1</span> ANOVA with interactions</a></li>
</ul></li>
<li><a href="14-5-type-i-type-ii-and-type-iii-anovas.html#type-i-type-ii-and-type-iii-anovas"><span class="toc-section-number">14.5</span> Type I, Type II, and Type III ANOVAs</a></li>
<li><a href="14-6-getting-additional-information-from-anova-objects.html#getting-additional-information-from-anova-objects"><span class="toc-section-number">14.6</span> Getting additional information from ANOVA objects</a></li>
<li><a href="14-7-repeated-measures-anova-using-the-lme4-package.html#repeated-measures-anova-using-the-lme4-package"><span class="toc-section-number">14.7</span> Repeated measures ANOVA using the lme4 package</a></li>
<li><a href="14-8-test-your-r-might-5.html#test-your-r-might-5"><span class="toc-section-number">14.8</span> Test your R might!</a></li>
</ul></li>
<li class="has-sub"><a href="15-regression.html#regression"><span class="toc-section-number">15</span> Regression</a><ul>
<li><a href="15-1-the-linear-model.html#the-linear-model"><span class="toc-section-number">15.1</span> The Linear Model</a></li>
<li class="has-sub"><a href="15-2-linear-regression-with-lm.html#linear-regression-with-lm"><span class="toc-section-number">15.2</span> Linear regression with <code>lm()</code></a><ul>
<li><a href="15-2-linear-regression-with-lm.html#estimating-the-value-of-diamonds-with-lm"><span class="toc-section-number">15.2.1</span> Estimating the value of diamonds with <code>lm()</code></a></li>
<li><a href="15-2-linear-regression-with-lm.html#getting-model-fits-with-fitted.values"><span class="toc-section-number">15.2.2</span> Getting model fits with <code>fitted.values</code></a></li>
<li><a href="15-2-linear-regression-with-lm.html#using-predict-to-predict-new-data-from-a-model"><span class="toc-section-number">15.2.3</span> Using <code>predict()</code> to predict new data from a model</a></li>
<li><a href="15-2-linear-regression-with-lm.html#including-interactions-in-models-y-x1-x2"><span class="toc-section-number">15.2.4</span> Including interactions in models: <code>y ~ x1 * x2</code></a></li>
<li><a href="15-2-linear-regression-with-lm.html#center-variables-before-computing-interactions"><span class="toc-section-number">15.2.5</span> Center variables before computing interactions!</a></li>
<li><a href="15-2-linear-regression-with-lm.html#getting-an-anova-from-a-regression-model-with-aov"><span class="toc-section-number">15.2.6</span> Getting an ANOVA from a regression model with <code>aov()</code></a></li>
</ul></li>
<li><a href="15-3-comparing-regression-models-with-anova.html#comparing-regression-models-with-anova"><span class="toc-section-number">15.3</span> Comparing regression models with <code>anova()</code></a></li>
<li><a href="15-4-regression-on-non-normal-data-with-glm.html#regression-on-non-normal-data-with-glm"><span class="toc-section-number">15.4</span> Regression on non-Normal data with <code>glm()</code></a></li>
<li class="has-sub"><a href="15-5-logistic-regression-with-glmfamily-binomial.html#logistic-regression-with-glmfamily-binomial"><span class="toc-section-number">15.5</span> Logistic regression with <code>glm(family = &quot;binomial&quot;</code></a><ul>
<li><a href="15-5-logistic-regression-with-glmfamily-binomial.html#adding-a-regression-line-to-a-plot"><span class="toc-section-number">15.5.1</span> Adding a regression line to a plot</a></li>
<li><a href="15-5-logistic-regression-with-glmfamily-binomial.html#transforming-skewed-variables-prior-to-standard-regression"><span class="toc-section-number">15.5.2</span> Transforming skewed variables prior to standard regression</a></li>
</ul></li>
<li><a href="15-6-test-your-might-a-ship-auction.html#test-your-might-a-ship-auction"><span class="toc-section-number">15.6</span> Test your might! A ship auction</a></li>
</ul></li>
<li class="has-sub"><a href="16-functions.html#functions"><span class="toc-section-number">16</span> Custom functions</a><ul>
<li><a href="16-1-why-would-you-want-to-write-your-own-function.html#why-would-you-want-to-write-your-own-function"><span class="toc-section-number">16.1</span> Why would you want to write your own function?</a></li>
<li class="has-sub"><a href="16-2-the-structure-of-a-custom-function.html#the-structure-of-a-custom-function"><span class="toc-section-number">16.2</span> The structure of a custom function</a><ul>
<li><a href="16-2-the-structure-of-a-custom-function.html#creating-my.mean"><span class="toc-section-number">16.2.1</span> Creating <code>my.mean()</code></a></li>
<li><a href="16-2-the-structure-of-a-custom-function.html#specifying-multiple-inputs"><span class="toc-section-number">16.2.2</span> Specifying multiple inputs</a></li>
<li><a href="16-2-the-structure-of-a-custom-function.html#including-default-values-for-arguments"><span class="toc-section-number">16.2.3</span> Including default values for arguments</a></li>
</ul></li>
<li><a href="16-3-using-if-then-statements-in-functions.html#using-if-then-statements-in-functions"><span class="toc-section-number">16.3</span> Using if, then statements in functions</a></li>
<li class="has-sub"><a href="16-4-a-worked-example-plot-advanced.html#a-worked-example-plot.advanced"><span class="toc-section-number">16.4</span> A worked example: <code>plot.advanced()</code></a><ul>
<li><a href="16-4-a-worked-example-plot-advanced.html#seeing-function-code"><span class="toc-section-number">16.4.1</span> Seeing function code</a></li>
<li><a href="16-4-a-worked-example-plot-advanced.html#using-stop-to-completely-stop-a-function-and-print-an-error"><span class="toc-section-number">16.4.2</span> Using <code>stop()</code> to completely stop a function and print an error</a></li>
<li><a href="16-4-a-worked-example-plot-advanced.html#using-vectors-as-arguments"><span class="toc-section-number">16.4.3</span> Using vectors as arguments</a></li>
<li><a href="16-4-a-worked-example-plot-advanced.html#storing-and-loading-your-functions-to-and-from-a-function-file-with-source"><span class="toc-section-number">16.4.4</span> Storing and loading your functions to and from a function file with <code>source()</code></a></li>
<li><a href="16-4-a-worked-example-plot-advanced.html#testing-functions"><span class="toc-section-number">16.4.5</span> Testing functions</a></li>
<li><a href="16-4-a-worked-example-plot-advanced.html#using-...-as-a-wildcard-argument"><span class="toc-section-number">16.4.6</span> Using <code>...</code> as a wildcard argument</a></li>
</ul></li>
<li><a href="16-5-test-your-r-might-6.html#test-your-r-might-6"><span class="toc-section-number">16.5</span> Test your R might!</a></li>
</ul></li>
<li class="has-sub"><a href="17-loops.html#loops"><span class="toc-section-number">17</span> Loops</a><ul>
<li class="has-sub"><a href="17-1-what-are-loops.html#what-are-loops"><span class="toc-section-number">17.1</span> What are loops?</a><ul>
<li><a href="17-1-what-are-loops.html#printing-numbers-from-1-to-100"><span class="toc-section-number">17.1.1</span> Printing numbers from 1 to 100</a></li>
<li><a href="17-1-what-are-loops.html#adding-the-integers-from-1-to-100"><span class="toc-section-number">17.1.2</span> Adding the integers from 1 to 100</a></li>
</ul></li>
<li><a href="17-2-creating-multiple-plots-with-a-loop.html#creating-multiple-plots-with-a-loop"><span class="toc-section-number">17.2</span> Creating multiple plots with a loop</a></li>
<li><a href="17-3-updating-a-container-object-with-a-loop.html#updating-a-container-object-with-a-loop"><span class="toc-section-number">17.3</span> Updating a container object with a loop</a></li>
<li><a href="17-4-loops-over-multiple-indices-with-a-design-matrix.html#loops-over-multiple-indices-with-a-design-matrix"><span class="toc-section-number">17.4</span> Loops over multiple indices with a design matrix</a></li>
<li><a href="17-5-the-list-object.html#the-list-object"><span class="toc-section-number">17.5</span> The list object</a></li>
<li><a href="17-6-test-your-r-might-7.html#test-your-r-might-7"><span class="toc-section-number">17.6</span> Test your R might!</a></li>
</ul></li>
<li class="has-sub"><a href="18-solutions.html#solutions"><span class="toc-section-number">18</span> Solutions</a><ul>
<li><a href="18-1-chapter-4-the-basics.html#chapter-4-the-basics"><span class="toc-section-number">18.1</span> Chapter 4: The Basics</a></li>
<li><a href="18-2-chapter-5-scalers-and-vectors.html#chapter-5-scalers-and-vectors"><span class="toc-section-number">18.2</span> Chapter 5: Scalers and vectors</a></li>
<li><a href="18-3-chapter-6-vector-functions.html#chapter-6-vector-functions"><span class="toc-section-number">18.3</span> Chapter 6: Vector Functions</a></li>
<li><a href="18-4-chapter-7-indexing-vectors-with.html#chapter-7-indexing-vectors-with"><span class="toc-section-number">18.4</span> Chapter 7: Indexing vectors with []</a></li>
<li><a href="18-5-chapter-8-matrices-and-dataframes.html#chapter-8-matrices-and-dataframes"><span class="toc-section-number">18.5</span> Chapter 8: Matrices and Dataframes</a></li>
<li><a href="18-6-chapter-13-hypothesis-tests.html#chapter-13-hypothesis-tests"><span class="toc-section-number">18.6</span> Chapter 13: Hypothesis tests</a></li>
<li><a href="18-7-chapter-14-anova.html#chapter-14-anova"><span class="toc-section-number">18.7</span> Chapter 14: ANOVA</a></li>
<li><a href="18-8-chapter-15-regression.html#chapter-15-regression"><span class="toc-section-number">18.8</span> Chapter 15: Regression</a></li>
</ul></li>
<li><a href="references.html#references">References</a></li>
</ul>
</div>
</div>
</div>
<div class="row">
<div class="col-sm-12">
<div id="a-worked-example-plot.advanced" class="section level2">
<h2><span class="header-section-number">16.4</span> A worked example: <code>plot.advanced()</code></h2>
<p>Let’s create our own advanced own custom plotting function called <code>plot.advanced()</code> that acts like the normal plotting function, but has several additional arguments</p>
<p>1 <code>add.mean</code>: A logical value indicating whether or not to add vertical and horizontal lines at the mean value of x and y. 2 <code>add.regression</code>: A logical value indicating whether or not to add a linear regression line 3 <code>p.threshold</code>: A numeric scalar indicating the p.value threshold for determining significance 4 <code>add.modeltext</code>: A logical value indicating whether or not to include the regression equation as a sub-title to the plot</p>
<p>This plotting code is a bit long, but it’s all stuff you’ve learned before.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">
plot.advanced &lt;-<span class="st"> </span><span class="cf">function</span> (<span class="dt">x =</span> <span class="kw">rnorm</span>(<span class="dv">100</span>),
                           <span class="dt">y =</span> <span class="kw">rnorm</span>(<span class="dv">100</span>),
                           <span class="dt">add.mean =</span> <span class="ot">FALSE</span>,
                           <span class="dt">add.regression =</span> <span class="ot">FALSE</span>,
                           <span class="dt">p.threshold =</span> .<span class="dv">05</span>,
                           <span class="dt">add.modeltext =</span> <span class="ot">FALSE</span>,
                           ...  <span class="co"># Optional further arguments passed on to plot</span>
                           ) {

<span class="co"># Generate the plot with optional arguments</span>
<span class="co">#   like main, xlab, ylab, etc.</span>
  <span class="kw">plot</span>(x, y, ...)

<span class="co"># Add mean reference lines if add.mean is TRUE</span>
<span class="cf">if</span>(add.mean <span class="op">==</span><span class="st"> </span><span class="ot">TRUE</span>) {

  <span class="kw">abline</span>(<span class="dt">h =</span> <span class="kw">mean</span>(y), <span class="dt">lty =</span> <span class="dv">2</span>)
  <span class="kw">abline</span>(<span class="dt">v =</span> <span class="kw">mean</span>(x), <span class="dt">lty =</span> <span class="dv">2</span>)
}

<span class="co"># Add regression line if add.regression is TRUE</span>
<span class="cf">if</span>(add.regression <span class="op">==</span><span class="st"> </span><span class="ot">TRUE</span>) {

  model &lt;-<span class="st"> </span><span class="kw">lm</span>(y <span class="op">~</span><span class="st"> </span>x)  <span class="co"># Run regression</span>

  p.value &lt;-<span class="st"> </span><span class="kw">anova</span>(model)<span class="op">$</span><span class="st">&quot;Pr(&gt;F)&quot;</span>[<span class="dv">1</span>] <span class="co"># Get p-value</span>

  <span class="co"># Define line color from model p-value and threshold</span>
  <span class="cf">if</span>(p.value <span class="op">&lt;</span><span class="st"> </span>p.threshold) {line.col &lt;-<span class="st"> &quot;red&quot;</span>}
  <span class="cf">if</span>(p.value <span class="op">&gt;=</span><span class="st"> </span>p.threshold) {line.col &lt;-<span class="st"> &quot;black&quot;</span>}

  <span class="kw">abline</span>(<span class="kw">lm</span>(y <span class="op">~</span><span class="st"> </span>x), <span class="dt">col =</span> line.col, <span class="dt">lwd =</span> <span class="dv">2</span>) <span class="co"># Add regression line</span>

}

  <span class="co"># Add regression equation text if add.modeltext is TRUE</span>
<span class="cf">if</span>(add.modeltext <span class="op">==</span><span class="st"> </span><span class="ot">TRUE</span>) {

  <span class="co"># Run regression</span>
  model &lt;-<span class="st"> </span><span class="kw">lm</span>(y <span class="op">~</span><span class="st"> </span>x)

  <span class="co"># Determine coefficients from model object</span>
  coefficients &lt;-<span class="st"> </span>model<span class="op">$</span>coefficients
  a &lt;-<span class="st"> </span><span class="kw">round</span>(coefficients[<span class="dv">1</span>], <span class="dv">2</span>)
  b &lt;-<span class="st"> </span><span class="kw">round</span>(coefficients[<span class="dv">2</span>], <span class="dv">2</span>)

  <span class="co"># Create text</span>
  model.text &lt;-<span class="st"> </span><span class="kw">paste</span>(<span class="st">&quot;Regression Equation: &quot;</span>, a, <span class="st">&quot; + &quot;</span>,
                      b, <span class="st">&quot; * x&quot;</span>, <span class="dt">sep =</span> <span class="st">&quot;&quot;</span>)

  <span class="co"># Add text to top of plot</span>
  <span class="kw">mtext</span>(model.text, <span class="dt">side =</span> <span class="dv">3</span>, <span class="dt">line =</span> .<span class="dv">5</span>, <span class="dt">cex =</span> .<span class="dv">8</span>)

}
}</code></pre></div>
<p>Let’s try it out!</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot.advanced</span>(<span class="dt">x =</span> pirates<span class="op">$</span>age,
              <span class="dt">y =</span> pirates<span class="op">$</span>tchests,
              <span class="dt">add.regression =</span> <span class="ot">TRUE</span>,
              <span class="dt">add.modeltext =</span> <span class="ot">TRUE</span>,
              <span class="dt">p.threshold =</span> .<span class="dv">05</span>,
              <span class="dt">main =</span> <span class="st">&quot;plot.advanced()&quot;</span>,
              <span class="dt">xlab =</span> <span class="st">&quot;Age&quot;</span>, <span class="dt">ylab =</span> <span class="st">&quot;Treasure Chests Found&quot;</span>,
              <span class="dt">pch =</span> <span class="dv">16</span>,
              <span class="dt">col =</span> <span class="kw">gray</span>(.<span class="dv">2</span>, .<span class="dv">3</span>))</code></pre></div>
<p><img src="YaRrr_files/figure-html/unnamed-chunk-446-1.png" width="672" style="display: block; margin: auto;" /></p>
<div id="seeing-function-code" class="section level3">
<h3><span class="header-section-number">16.4.1</span> Seeing function code</h3>
<p>Because R is awesome, you can view the code underlying most functions by just evaluating the name of the function (without any parentheses or arguments). For example, the <code>yarrr</code> package contains a function called <code>transparent()</code> that converts standard colors into transparent colors. To see the code contained in the function, just evaluate its name:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Show me the code in the transparent() function</span>
transparent
## function(orig.col = &quot;red&quot;, trans.val = 1, maxColorValue = 255) {
## 
##   n.cols &lt;- length(orig.col)
##   orig.col &lt;- col2rgb(orig.col)
## 
##   final.col &lt;- rep(NA, n.cols)
## 
##   for(i in 1:n.cols) {
## 
##     final.col[i] &lt;- rgb(orig.col[1, i], orig.col[2, i], orig.col[3, i],
##                         alpha = (1 - trans.val) * 255,
##                         maxColorValue = maxColorValue)
## 
##   }
## 
##   return(final.col)
## }
## &lt;bytecode: 0x10e7e4ae0&gt;
## &lt;environment: namespace:yarrr&gt;</code></pre></div>
<p>Once you know the code underlying a function, you can easily copy it and edit it to your own liking. Or print it and put it above your bed. Totally up to you.</p>
</div>
<div id="using-stop-to-completely-stop-a-function-and-print-an-error" class="section level3">
<h3><span class="header-section-number">16.4.2</span> Using <code>stop()</code> to completely stop a function and print an error</h3>
<p>By default, all the code in a function will be evaluated when it is executed. However, there may be cases where there’s no point in evaluating some code and it’s best to stop everything and leave the function altogether. For example, let’s say you have a function called <code>do.stats()</code> that has a single argument called <code>mat</code> which is supposed to be a matrix. If the user accidentally enters a dataframe rather than a matrix, it might be best to stop the function altogether rather than to waste time executing code. To tell a function to stop running, use the <code>stop()</code> function.</p>
<p>If R ever executes a <code>stop()</code> function, it will automatically quit the function it’s currently evaluating, and print an error message. You can define the exact error message you want by including a string as the main argument.</p>
<p>For example, the following function <code>do.stats</code> will print an error message if the argument <code>mat</code> is not a matrix.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">do.stats &lt;-<span class="st"> </span><span class="cf">function</span>(mat) {
  
<span class="cf">if</span>(<span class="kw">is.matrix</span>(mat) <span class="op">==</span><span class="st"> </span>F) {<span class="kw">stop</span>(<span class="st">&quot;Argument was not a matrix!&quot;</span>)}

<span class="co"># Only run if argument is a matrix!</span>
<span class="kw">print</span>(<span class="kw">paste</span>(<span class="st">&quot;Thanks for giving me a matrix. The matrix has &quot;</span>, <span class="kw">nrow</span>(mat), 
<span class="st">&quot; rows and &quot;</span>, <span class="kw">ncol</span>(mat), 
<span class="st">&quot; columns. If you did not give me a matrix, the function would have stopped by now!&quot;</span>, 
<span class="dt">sep =</span> <span class="st">&quot;&quot;</span>))

}</code></pre></div>
<p>Let’s test it. First I’ll enter an argument that is definitely not a matrix:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">do.stats</span>(<span class="dt">mat =</span> <span class="st">&quot;This is a string, not a matrix&quot;</span>) </code></pre></div>
<p>Now I’ll enter a valid matrix argument:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">do.stats</span>(<span class="dt">mat =</span> <span class="kw">matrix</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>, <span class="dt">nrow =</span> <span class="dv">2</span>, <span class="dt">ncol =</span> <span class="dv">5</span>))
## [1] &quot;Thanks for giving me a matrix. The matrix has 2 rows and 5 columns. If you did not give me a matrix, the function would have stopped by now!&quot;</code></pre></div>
</div>
<div id="using-vectors-as-arguments" class="section level3">
<h3><span class="header-section-number">16.4.3</span> Using vectors as arguments</h3>
<p>You can use any kind of object as an argument to a function. For example, we could re-create the function <code>oh.god.how.much.did.i.spend</code> by having a single vector object as the argument, rather than three separate values. In this version, we’ll extract the values of a, b and c using indexing:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">oh.god.how.much.did.i.spend &lt;-<span class="st"> </span><span class="cf">function</span>(drinks.vec) {

  grogg &lt;-<span class="st"> </span>drinks.vec[<span class="dv">1</span>]
  port &lt;-<span class="st"> </span>drinks.vec[<span class="dv">2</span>]
  crabjuice &lt;-<span class="st"> </span>drinks.vec[<span class="dv">3</span>]

  output &lt;-<span class="st"> </span>grogg <span class="op">*</span><span class="st"> </span><span class="dv">1</span> <span class="op">+</span><span class="st"> </span>port <span class="op">*</span><span class="st"> </span><span class="dv">3</span> <span class="op">+</span><span class="st"> </span>crabjuice <span class="op">*</span><span class="st"> </span><span class="dv">10</span>

  <span class="kw">return</span>(output)

}</code></pre></div>
<p>To use this function, the pirate will enter the number of drinks she had as a single vector with length three rather than as 3 separate scalars.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">oh.god.how.much.did.i.spend</span>(<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">2</span>))
## [1] 36</code></pre></div>
</div>
<div id="storing-and-loading-your-functions-to-and-from-a-function-file-with-source" class="section level3">
<h3><span class="header-section-number">16.4.4</span> Storing and loading your functions to and from a function file with <code>source()</code></h3>
<p>As you do more programming in R, you may find yourself writing several function that you’ll want to use again and again in many different R scripts. It would be a bit of a pain to have to re-type your functions every time you start a new R session, but thankfully you don’t need to do that. Instead, you can store all your functions in one R file and then load that file into each R session.</p>
<p>I recommend that you put all of your custom R functions into a single R script with a name like <code>customfunctions.R</code>. Mine is called <code>Custom_Pirate_Functions.R</code>. Once you’ve done this, you can load all your functions into any R session by using the <code>source()</code> function. The source function takes a file directory as an argument (the location of your custom function file) and then executes the R script into your current session.</p>
<p>For example, on my computer my custom function file is stored at Users/Nathaniel/Dropbox/Custom_Pirate_Functions.R. When I start a new R session, I load all of my custom functions by running the following code:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Evaluate all of the code in my custom function R script</span>
<span class="kw">source</span>(<span class="dt">file =</span> <span class="st">&quot;Users/Nathaniel/Dropbox/Custom_Pirate_Functions.R&quot;</span>)</code></pre></div>
<p>Once I’ve run this, I have access to all of my functions, I highly recommend that you do the same thing!</p>
</div>
<div id="testing-functions" class="section level3">
<h3><span class="header-section-number">16.4.5</span> Testing functions</h3>
<p>When you start writing more complex functions, with several inputs and lots of function code, you’ll need to constantly test your function line-by-line to make sure it’s working properly. However, because the input values are defined in the input definitions (which you won’t execute when testing the function), you can’t actually test the code line-by-line until you’ve defined the input objects in some other way. To do this, I recommend that you include temporary hard-coded values for the inputs at the beginning of the function code.</p>
<p>For example, consider the following function called <code>remove.outliers</code>. The goal of this function is to take a vector of data and remove any data points that are outliers. This function takes two inputs <code>x</code> and <code>outlier.def</code>, where <code>x</code> is a vector of numerical data, and <code>outlier.def</code> is used to define what an outlier is: if a data point is <code>outlier.def</code> standard deviations away from the mean, then it is defined as an outlier and is removed from the data vector.</p>
<p>In the following function definition, I’ve included two lines where I directly assign the function inputs to certain values (in this case, I set x to be a vector with 100 values of 1, and one outlier value of 999, and <code>outlier.def</code> to be 2). Now, if I want to test the function code line by line, I can uncomment these test values, execute the code that assigns those test values to the input objects, then run the function code line by line to make sure the rest of the code works.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">remove.outliers &lt;-<span class="st"> </span><span class="cf">function</span>(x, <span class="dt">outlier.def =</span> <span class="dv">2</span>) {

<span class="co"># Test values (only used to test the following code)</span>
<span class="co">#  x &lt;- c(rep(1, 100), 999)</span>
<span class="co">#  outlier.def &lt;- 2</span>

  is.outlier &lt;-<span class="st"> </span>x <span class="op">&gt;</span><span class="st"> </span>(<span class="kw">mean</span>(x) <span class="op">+</span><span class="st"> </span>outlier.def <span class="op">*</span><span class="st"> </span><span class="kw">sd</span>(x)) <span class="op">|</span><span class="st"> </span>
<span class="st">                </span>x <span class="op">&lt;</span><span class="st"> </span>(<span class="kw">mean</span>(x) <span class="op">-</span><span class="st"> </span>outlier.def <span class="op">*</span><span class="st"> </span><span class="kw">sd</span>(x))
  
  x.nooutliers &lt;-<span class="st"> </span>x[is.outlier <span class="op">==</span><span class="st"> </span><span class="ot">FALSE</span>]

  <span class="kw">return</span>(x.nooutliers)

}</code></pre></div>
<p>Trust me, when you start building large complex functions, hard-coding these test values will save you many headaches. Just don’t forget to comment them out when you are done testing or the function will always use those values!</p>
</div>
<div id="using-...-as-a-wildcard-argument" class="section level3">
<h3><span class="header-section-number">16.4.6</span> Using <code>...</code> as a wildcard argument</h3>
<p>For some functions that you write, you may want the user to be able to specify inputs to functions within your overall function. For example, if I create a custom function that includes the histogram function <code>hist()</code> in R, I might also want the user to be able to specify optional inputs for the plot, like <code>main</code>, <code>xlab, ylab</code>, etc. However, it would be a real pain in the pirate ass to have to include all possible plotting parameters as inputs to our new function. Thankfully, we can take care of all of this by using the <code>...</code> notation as an input to the function. Note that the <code>...</code> notation will only pass arguments on to functions that are specifically written to allow for optional inputs. If you look at the help menu for <code>hist()</code>, you’ll see that it does indeed allow for such option inputs passed on from other functions. The <code>...</code> input tells R that the user might add additional inputs that should be used later in the function.</p>
<p>Here’s a quick example, let’s create a function called <code>hist.advanced()</code> that plots a histogram with some optional additional arguments passed on with <code>...</code></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">hist.advanced &lt;-<span class="st"> </span><span class="cf">function</span>(x, <span class="dt">add.ci =</span> <span class="ot">TRUE</span>, ...) {

<span class="kw">hist</span>(x, <span class="co"># Main Data</span>
     ... <span class="co"># Here is where the additional arguments go</span>
     )

<span class="cf">if</span>(add.ci <span class="op">==</span><span class="st"> </span><span class="ot">TRUE</span>) {

  ci &lt;-<span class="st"> </span><span class="kw">t.test</span>(x)<span class="op">$</span>conf.int <span class="co"># Get 95% CI</span>
  <span class="kw">segments</span>(ci[<span class="dv">1</span>], <span class="dv">0</span>, ci[<span class="dv">2</span>], <span class="dv">0</span>, <span class="dt">lwd =</span> <span class="dv">5</span>, <span class="dt">col =</span> <span class="st">&quot;red&quot;</span>)

  <span class="kw">mtext</span>(<span class="kw">paste</span>(<span class="st">&quot;95% CI of Mean = [&quot;</span>, <span class="kw">round</span>(ci[<span class="dv">1</span>], <span class="dv">2</span>), <span class="st">&quot;,&quot;</span>,
              <span class="kw">round</span>(ci[<span class="dv">2</span>], <span class="dv">2</span>), <span class="st">&quot;]&quot;</span>), <span class="dt">side =</span> <span class="dv">3</span>, <span class="dt">line =</span> <span class="dv">0</span>)
}
}</code></pre></div>
<p>Now, let’s test our function with the optional inputs <code>main</code>, <code>xlab</code>, and <code>col</code>. These arguments will be passed down to the <code>hist()</code> function within <code>hist.advanced()</code>. Here is the result:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">hist.advanced</span>(<span class="dt">x =</span> <span class="kw">rnorm</span>(<span class="dv">100</span>), <span class="dt">add.ci =</span> <span class="ot">TRUE</span>,
              <span class="dt">main =</span> <span class="st">&quot;Treasure Chests found&quot;</span>,
              <span class="dt">xlab =</span> <span class="st">&quot;Number of Chests&quot;</span>,
              <span class="dt">col =</span> <span class="st">&quot;lightblue&quot;</span>)</code></pre></div>
<p><img src="YaRrr_files/figure-html/unnamed-chunk-456-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>As you can see, R has passed our optional plotting arguments down to the main <code>hist()</code> function in the function code.</p>
</div>
</div>
<p style="text-align: center;">
<a href="16-3-using-if-then-statements-in-functions.html"><button class="btn btn-default">Previous</button></a>
<a href="16-5-test-your-r-might-6.html"><button class="btn btn-default">Next</button></a>
</p>
</div>
</div>


</div>

<script>

// add bootstrap table styles to pandoc tables
$(document).ready(function () {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
});

</script>

</body>
</html>
